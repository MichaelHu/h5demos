<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=320.1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/> 
        <title>CANVAS-ANIM</title>
        <link rel="stylesheet" href="../lib/css/reset.css"/>
        <link rel="stylesheet" href="./canvas-anim.css"/>
    </head>
    <body>
        <canvas id="eye"></canvas>









关于使用Css设置Canvas画布大小的问题  

2013-11-06 11:24:18|  分类： Android |  标签：前端开发   |举报|字号 订阅
问题分析

我们在调整画布大小时，希望画布中的图形保持不变，只是改变画布本身的大小。但是如果使用Css设置画布大小，则会出现问题。

问题描述

如果使用Css设置Canvas画布的大小，则导致画布按比例缩放到你设置的值。

原因

在Canvas元素的内部存在一个名为2d渲染环境（2d redering context）的对象，所以，通过Css设置画布尺寸会引起奇怪的效果。

解决方案

通过Html设置画布大小。可以直接在Html页面上设置Canvas元素的大小：

&lt;canvas id="testCanvas" width="200" height="100"&gt;&lt;/canvas&gt;
也可以通过js设置画布大小：

    var canvas = document.getElementById("testCanvas");
    canvas.width = 200;
    canvas.height = 100;
这两种方法都可以。

示例

首先我们创建一个宽度为200px，高度为100px的画布，它的边框为红色。然后在中间画一个大小为20*20的正方形：



代码

复制代码
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;canvas id="testCanvas"&gt;&lt;/canvas&gt;
&lt;script&gt;
    var canvas, context;
    canvas = document.getElementById("testCanvas");

    canvas.width = 200;
    canvas.height = 100;
    canvas.style.border = "1px solid red";

    context = canvas.getContext("2d");
    context.strokeStyle = "#99cc33";
    context.fillRect(90, 40, 20, 20);
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
复制代码
将画布大小缩小1倍

使用css设置画布大小

相关代码
    canvas.style.width = "100px";
    canvas.style.height = "50px";
效果


分析
我们发现画布是整体按比例缩小了1倍。

使用js设置画布大小

相关代码
    canvas.width = 100;
    canvas.height = 50;

    //设置画布大小后，所有样式会重置。因此需要重新绘制正方形
    context.fillRect(90, 40, 20, 20);
 











    </body>
    <script src="../lib/zepto.js"></script>
    <script src="./canvas-anim.js"></script>
    <script src="./play.js"></script>
</html>



